<html><body><p>requests-html seems to work with pypy 3.6 -v7.0, but the normal requests not.<br><br><br>This Code works with cpython <br><br>from requests_html import HTMLSession<br>import requests<br><br>def get_url():<br>    session = HTMLSession()<br>    #r = session.get('https://www.kernel.org/', verify='kernel.org.crt')<br>    r = session.get('https://www.kernel.org/')<br>    url = r.html.xpath('//*[@id="latest_link"]/a/@href')<br>    return url[0]<br><br>def download():<br>    with open('last_stable_kernel.txt', 'rt') as last_kernel:<br>        last_kernel = last_kernel.read() <br>    url = get_url()<br>    if url != last_kernel:<br>        print('New kernel found !!!\n')<br>        print('Downloading from this url: \n' + url )<br>        res = requests.get(url, stream = True)<br>        if res.status_code == requests.codes.ok: # Check the download<br>            print('Download complete\n')<br>        print('Writing file to disk.')<br>        kernel = open('latest_kernel.tar.xz', 'wb')<br>        for file in res.iter_content(1024):<br>            kernel.write(file)<br>        kernel.close()<br>        with open('last_stable_kernel.txt','wt') as last_kernel:<br>            last_kernel.write(url)<br>        return True<br><br>    else:<br>        print('I have allready the newest kernel !')<br>        return False<br><br>if __name__ == "__main__":<br>    download()</p></body></html>