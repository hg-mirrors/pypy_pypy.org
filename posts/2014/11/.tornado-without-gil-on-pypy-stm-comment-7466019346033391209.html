<html><body><p>&gt; Clearly this is a very benchmark" - looks like you've missed a word here ;)<br><br>Oh, yes, that word is "bad" :)<br><br>&gt; Shouldn't MapChangeHandler.put() be wrapped in a exclusive write lock, and all the get() handlers be wrapped with a shared read lock?<br><br>Here all request handlers are already wrapped inside atomic blocks, but this is hidden from us in (modified) tornado. So we do not need any locks (as in normal tornado too, because normal tornado is single threaded). If request handlers conflict, then we just loose performance, not correctness. This is one of the main points of PyPy STM: it can support multithreaded code without needing to use locks.<br><br>Regarding the probabilities: yes, that's not quite intentional)</p></body></html>