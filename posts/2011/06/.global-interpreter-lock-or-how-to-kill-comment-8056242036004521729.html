<html><body><p>One note on the lock-based example you gave, that locks list1 and then list2: It isn't free of deadlocks!<br><br>Having two threads call the function simultaneously with swapped args may cause a deadlock. See the bank account problem.</p></body></html>