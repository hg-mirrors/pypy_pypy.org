<html><body><p>If you translate a pypy-c with <code>--allworkingmodules</code> and start it, you will probably not notice anything strange about its prompt - except when typing multiline statements. You can move the cursor up and continue editing previous lines. And the history is multiline-statements-aware as well. Great experience! Ah, and completion using <code>tab</code> is nice too.</p>

<p>Truth be told, there is nothing new here: it was all done by Michael Hudson's <a href="http://codespeak.net/pyrepl/">pyrepl</a> many years ago.  We had already included pyrepl in PyPy some time ago.  What is new is a pure Python <code>readline.py</code> which exposes the most important parts of the API of the standard <code>readline</code> module by wrapping pyrepl under the hood, without needing the GNU readline library at all. The PyPy prompt is based on this, benefitting automagically from pyrepl's multiline editing capabilities, with minor tweaks so that the prompt looks much more like CPython's than a regular pyrepl prompt does.</p>

<p>You can also try and use this multiline prompt with CPython: check out pyrepl at <code>http://codespeak.net/svn/pyrepl/trunk/pyrepl</code> and run the new <code>pythoni1</code> script.</p></body></html>