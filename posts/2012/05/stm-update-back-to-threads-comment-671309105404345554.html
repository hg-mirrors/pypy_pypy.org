<html><body><p>@Kris: ah, ok: you have a version of "atomic" that doesn't prevent the GIL from being released around I/O calls.  This is different from the version described in this post, which is also what I assumed in my previous answer.  In a "with atomic" block, the GIL is not released under any circumstance (equivalently, the whole "atomic" block runs as a single transaction), so that the programmer can assume that a "with atomic" block is truly atomic.</p></body></html>