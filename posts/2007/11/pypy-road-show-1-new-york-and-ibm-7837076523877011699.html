<html><body><p>We're slowly getting adjusted to the jet-lag (except maybe Samuele). Time to blog...</p> <p>The past two days at IBM, in New York, have been quite interesting.  The place is a research center.  Feels University-like, but meetings rooms have no windows and climatization fixed on "polar" settings.  The building is of course heated at this time of the year, and then the meeting rooms are climatized... I guess that just doesn't make sense to me.</p> <p>We gave a 1h30 <a class="reference" href="http://codespeak.net/roadshow/svn/talk/talk.html">talk to a general audience</a> first.  Then we had a compact schedule of meetings with various people or groups of people.  In the early preparations for this trip we planned to stay only one day, but Martin Hirzel, our host, found too many people that wanted to talk with us :-)</p> <p>I think that both us and most of the people we talked with got interesting things out of the meetings.  On our side, let me point a few highlights.</p> <p>We asked two people that worked on the <a class="reference" href="http://jikesrvm.org/MMTk">GCs</a> for the <a class="reference" href="http://jikesrvm.org/">Jikes RVM</a> if reusing them for RPython programs would make sense.  They didn't scream "you're mad!", so I guess the answer is yes.  Apparently, it has been done before, too.  I'm still not sure I got this right, but it seems that Microsoft paid someone money to integrate them with Rotor...  Then the real-time garbage-collection guys explained to us the things that we need to take care about when writing a VM: real-time GC needs not only write barriers and read barriers, but pointer-equality-comparison barriers...  They have bad memories of trying to add a posteriori this kind of barrier into existing VMs, so it took us a bit of explaining to make them realize that adding new kinds of barriers is mostly trivial for us (I'm still not 100% sure they got it... bad memories can stick hard).</p> <p>Then we had discussions with JIT people.  Mostly, this allowed us to confirm that Samuele has already got a good idea about what Java JITs like Hotspot can do, and in which kind of situation they work well.  As expected, the most difficult bit for a PyPy-like JIT that would run on top of a JVM would be the promotion.  We discussed approaches like first generating fall-back cases that include some instrumentation logic, and regenerating code with a few promoted values after some time if it seems like it will be a gain.  Replacing a method with a new version is difficult to do in a way that is portable across Java VMs. There are still possible workarounds, but it also means that if we really want to explore this seriously, we should consider experimenting with specifics VMs - e.g. the Jikes RVM gives (or could be adapted to give) hooks to replace methods with new versions of them, which is something that the JVM's own JIT internally does all the time.</p> <p>We showed the <a class="reference" href="http://codespeak.net/pypy/dist/pypy/doc/objspace-proxies.html#the-taint-object-space">taint object space</a> and the <a class="reference" href="http://codespeak.net/pypy/dist/pypy/doc/sandbox.html">sandboxed PyPy</a> to several groups of security people.  I won't say much about it here, beyond the fact that they were generally interested by the fact that the corresponding code is very short and easy to play with.  They are doing a lot on security in Java and... PHP, for web sites.  Someone could write a PHP interpreter (!) in PyPy to get the same kind of results. But as Laura and Samuele put it, there are things in life you do for fun, and things you do for money :-)</p> <p>We're in Vancouver today and tomorrow.  More about this later...</p> <p>Armin Rigo</p></body></html>